<nav x-data="{isOpen: false, {{ nav:main }}{{ if children }}menu{{ index }}:false, {{ /if }}{{ /nav:main }} }"
    class="font-inter mx-auto h-auto w-full mb-12 lg:sticky top-0 z-20 bg-[#fff]">
    <div
        class="flex max-w-7xl flex-col px-5 py-6 lg:flex-row lg:items-center lg:justify-between md:px-10 lg:py-4 mx-auto">
        <a href="{{ homepage }}"><img src="/assets/logo-cdn.svg" alt="Logo" width="75"></a>
        <div x-bind:class="isOpen ? 'show' : 'hidden'"
            class="mt-14 flex flex-col space-y-8 lg:mt-0 lg:flex lg:flex-row lg:space-x-1 lg:space-y-0">
            {{ nav:main }}
            {{ if children }}
            <div class="relative flex flex-col"><a x-on:click.prevent="menu{{ index }} = !menu{{ index }}" href="#"
                    x-bind:class="menu{{ index }}"
                    class="flex flex-row text-[#000000] font-inter font-medium rounded-lg lg:px-6 lg:py-4 lg:hover:bg-gray-50 lg:hover:text-gray-800">{{ title }}
                    <svg x-bind:class="menu{{ index }} ? 'rotate-180' : 'rotate-0' " viewBox="0 0 24 24"
                        class="fill-current transition rotate-0" style="width:24px;height:24px">
                        <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path>
                    </svg></a>
                <div x-show="menu{{ index }}" x-on:click.outside="menu{{ index }} = false"
                    x-transition:enter="transition ease-out duration-200"
                    x-transition:enter-start="opacity-0 translate-y-10"
                    x-transition:enter-end="opacity-100 translate-y-0"
                    x-transition:leave="transition ease-in duration-200"
                    x-transition:leave-start="opacity-100 translate-y-0"
                    x-transition:leave-end="opacity-0 translate-y-10"
                    class="lg:px-75 z-50 flex w-full lg:w-[300px] flex-col rounded-lg bg-gray-50 border px-5 py-5 lg:absolute lg:top-20 lg:flex-row lg:flex-wrap lg:py-7 lg:shadow-[0_16px_64px_-15px_rgba(45,96,173,0.15)]"
                    style="display: none;">
                    {{ children }}
                    <a href="{{ url }}"
                        class="flex grow flex-col rounded-lg px-1 py-2 lg:basis-[248px] xl:px-5">
                        <div class="text-black font-inter lg:text-lg font-medium">
                            {{ title }}
                        </div>
                    </a>
                    {{ /children }}
                </div>
            </div>
            {{ else }}
            <a href="{{ url }}"
                class="font-inter font-medium rounded-lg lg:px-6 lg:py-4 lg:hover:bg-gray-50 lg:hover:text-gray-800">{{ title }}</a>
            {{ /if }}
            {{ /nav:main }}
        </div>
        <div x-bind:class="isOpen ? 'show' : 'hidden'"
            class="flex flex-col space-y-8 lg:flex lg:flex-row lg:space-x-3 lg:space-y-0 mt-8 lg:mt-0">
            <a href="{{ link to="contact" }}"
                class="font-inter rounded-lg lg:px-6 lg:py-4 lg:hover:bg-gray-50 lg:hover:text-gray-800">{{ trans:site.help_and_contact }}</a>
            {{ if race:startlists_link }}
            <a href="{{ race:startlists_link }}" class="button-secondary">{{ trans:site.entrylists }}</a>
            {{ /if }}
            {{ if race:date <= today && race:result_link }}
            <a href="{{ race:result_link }}" class="button-primary">{{ trans:site.results }}</a>
            {{ /if }}
            {{ if race:registration_link }}
            <a href="{{ race:registration_link }}" class="button-secondary">{{ trans:site.register }}</a>
            {{ /if }}
            {{ locales self="false" }}
                <a class="{{ site:handle === handle ?= 'underline' }} font-inter rounded-lg lg:px-6 lg:py-4 lg:hover:bg-gray-50 lg:hover:text-gray-800" href="{{ url }}">{{ locale:short | upper }}</a>
            {{ /locales }}
        </div>
        <a href="#" x-on:click.prevent="isOpen = !isOpen" class="absolute right-5 lg:hidden"><svg width="24" height="24"
                viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 12H20.25" stroke="#160042" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"></path>
                <path d="M3.75 6H20.25" stroke="#160042" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"></path>
                <path d="M3.75 18H20.25" stroke="#160042" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"></path>
            </svg></a>
    </div>
    {{ partial:banner}}
</nav>
